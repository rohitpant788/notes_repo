# **Spring Boot - Presentation Layer & Controller Basics**

## **üåü Introduction to Web Architecture**

- The **presentation layer** is the first layer in web architecture.
- It is responsible for handling **client communication** via **HTTP connections**.
- It acts as the **entry point** between the client and the Spring Boot application.

### **üë®‚Äçüíª Role of the Controller in Spring Boot**

- The **controller** is responsible for:
    - Handling **incoming requests**.
    - Processing the **input from the client**.
    - Returning the **output response** back to the client.

---

## **üöÄ Spring Boot Controllers - Deep Dive**

### **1Ô∏è‚É£ Dispatcher Servlet**

- **Dispatcher Servlet** is the core of Spring MVC.
- When the server starts, the **Dispatcher Servlet scans all controllers** and maps request URLs to appropriate methods.

üîπ **Responsibilities of Dispatcher Servlet:**

- Maps URLs to **specific methods**.
- Routes **GET, POST, PUT, DELETE** requests.
- Delegates requests to appropriate **controllers**.

### **2Ô∏è‚É£ Creating the First Controller**

1. **Navigate to the controller package in the Spring Boot project.**
2. Create a new controller class:
    
    ```Java
    java
    CopyEdit
    @RestController
    public class EmployeeController {
    }
    
    ```
    
3. **Use** `**@RestController**` **Annotation:**
    - Ensures that this class is a REST controller.
    - It is a combination of `@Controller` and `@ResponseBody`.
4. **Alternative: Use** `**@Controller**`
    - If using `@Controller`, you need to add `@ResponseBody` to every method manually.

### **3Ô∏è‚É£ How** `**@RestController**` **Works**

- `@RestController` is internally:
    - **Extending** `**@Controller**`
    - **Using** `**@ResponseBody**` **to handle responses**.

üîπ **Example of** `**@ResponseBody**` **with** `**@Controller**` **(without** `**@RestController**`**):**

```Java
java
CopyEdit
@Controller
public class EmployeeController {
    @RequestMapping("/employee")
    @ResponseBody
    public EmployeeDTO getEmployee() {
        return new EmployeeDTO(1L, "John", "john@example.com", 30);
    }
}

```

üí° **With** `**@RestController**`**,** `**@ResponseBody**` **is not needed separately!**

---

## **üîó Understanding Request Mappings**

Spring MVC allows handling various HTTP requests using **different mapping annotations**.

### **1Ô∏è‚É£ Request Mapping (**`**@RequestMapping**`**)**

- Used at **class level** to define a **common base URL**.
- Example:
    
    ```Java
    java
    CopyEdit
    @RestController
    @RequestMapping("/employees") // Base URL
    public class EmployeeController {
    }
    
    ```
    
- Now, any mapping inside this class will **append to** `**/employees**`.

### **2Ô∏è‚É£ Types of HTTP Mappings**

|   |   |   |
|---|---|---|
|Annotation|Request Type|Purpose|
|`@GetMapping`|GET|Fetch Data|
|`@PostMapping`|POST|Create Resource|
|`@PutMapping`|PUT|Update Entire Resource|
|`@DeleteMapping`|DELETE|Remove Resource|
|`@PatchMapping`|PATCH|Modify Partial Resource|

---

## **üü¢ Implementing GET Request (**`**@GetMapping**`**)**

```Java
java
CopyEdit
@GetMapping("/{id}")
public EmployeeDTO getEmployeeById(@PathVariable Long id) {
    return new EmployeeDTO(id, "John Doe", "john@example.com", 30);
}

```

### **üìù Explanation:**

1. `**@GetMapping("/{id}")**` ‚Üí Maps `GET /employees/{id}`.
2. `**@PathVariable Long id**` ‚Üí Extracts `{id}` from the URL.
3. Returns an **EmployeeDTO** object.

### **üß© Path Variables vs Request Parameters**

|   |   |   |
|---|---|---|
|Approach|Example URL|Use Case|
|**Path Variable (**`**@PathVariable**`**)**|`/employees/1`|Mandatory data like `id`|
|**Request Parameter (**`**@RequestParam**`**)**|`/employees?sortBy=name`|Optional filters/sorting|

üîπ **Example of Request Parameters:**

```Java
java
CopyEdit
@GetMapping
public String getAllEmployees(@RequestParam(required = false) String sortBy) {
    return "Sorting by: " + sortBy;
}

```

- `@RequestParam(required = false)` makes the parameter **optional**.

---

## **üü† Implementing POST Request (**`**@PostMapping**`**)**

```Java
java
CopyEdit
@PostMapping
public EmployeeDTO createEmployee(@RequestBody EmployeeDTO employeeDTO) {
    employeeDTO.setId(100L);
    return employeeDTO;
}

```

### **üìù Explanation:**

1. `**@PostMapping**` ‚Üí Handles `POST /employees`.
2. `**@RequestBody EmployeeDTO employeeDTO**`:
    - Accepts JSON input and maps it to `EmployeeDTO`.
    - Uses **Jackson library** to **automatically convert JSON to Java object**.
3. **Returns the saved employee**.

üìå **Sending JSON in Postman:**

```JSON
json
CopyEdit
{
  "name": "Ram",
  "email": "ram@example.com",
  "age": 23
}

```

- Response:

```JSON
json
CopyEdit
{
  "id": 100,
  "name": "Ram",
  "email": "ram@example.com",
  "age": 23
}

```

---

## **üü£ Implementing PUT Request (**`**@PutMapping**`**)**

```Java
java
CopyEdit
@PutMapping("/{id}")
public String updateEmployee(@PathVariable Long id, @RequestBody EmployeeDTO updatedEmployee) {
    return "Updated Employee ID: " + id;
}

```

### **üìù Explanation:**

- **PUT is used for full updates**.
- Requires:
    - `@PathVariable Long id` to specify **which employee to update**.
    - `@RequestBody EmployeeDTO` for **new values**.

---

## **üî¥ Implementing DELETE Request (**`**@DeleteMapping**`**)**

```Java
java
CopyEdit
@DeleteMapping("/{id}")
public String deleteEmployee(@PathVariable Long id) {
    return "Deleted Employee ID: " + id;
}

```

### **üìù Explanation:**

- Maps `DELETE /employees/{id}`.
- Deletes the employee **identified by** `**id**`.

---

## **üü° Component Scanning in Spring Boot**

### **üîç How Spring Boot Detects Controllers**

1. **Spring Boot automatically scans components**.
2. `**@SpringBootApplication**` enables scanning.
3. Uses `**@ComponentScan**` to locate beans.

üí° **Ensures controllers are detected without manual configuration!**

---

## **‚úÖ Summary - Quick Revision**

|   |   |
|---|---|
|Topic|Key Points|
|**Presentation Layer**|Handles client-server interaction.|
|**Controller Role**|Manages incoming requests.|
|**Dispatcher Servlet**|Maps requests to methods.|
|`**@RestController**`|Combines `@Controller` + `@ResponseBody`.|
|**GET Request**|Uses `@GetMapping` + `@PathVariable`.|
|**POST Request**|Uses `@PostMapping` + `@RequestBody`.|
|**PUT Request**|Uses `@PutMapping` + `@RequestBody`.|
|**DELETE Request**|Uses `@DeleteMapping`.|
|**Path Variables**|Used for mandatory parameters.|
|**Request Params**|Used for optional filters/sorting.|
|**Jackson Library**|Converts JSON ‚Üî Java Object.|
|**Component Scanning**|Auto-detects controllers.|

---

üî• **Interview Tip:**

- Understand the **difference between GET, POST, PUT, DELETE, PATCH**.
- Be clear on **Path Variables vs Request Parameters**.
- Know how **Spring Boot handles request mapping automatically**.

---